{"version":3,"sources":["../../../../src/app/page.tsx","../../../../src/lib/safety-storage.ts","../../../../src/app/components/LandingPage.tsx","../../../../src/app/components/HourglassProgress.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { saveSafetyEvent, generateEventId, getCriticalEvents } from '@/lib/safety-storage';\nimport type { SafetyAnalysis } from '@/lib/site-guardian';\nimport type { SafetyEvent } from '@/lib/safety-storage';\nimport LandingPage from './components/LandingPage';\nimport HourglassProgress from './components/HourglassProgress';\n\nexport default function SiteGuardianDashboard() {\n  const [showLanding, setShowLanding] = useState(true);\n  const [file, setFile] = useState<File | null>(null);\n  const [analyzing, setAnalyzing] = useState(false);\n  const [analysisProgress, setAnalysisProgress] = useState(0);\n  const [currentAnalysis, setCurrentAnalysis] = useState<SafetyAnalysis | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [audioEnabled, setAudioEnabled] = useState(true);\n  const [criticalAlerts, setCriticalAlerts] = useState<SafetyEvent[]>([]);\n  const [annotatedImage, setAnnotatedImage] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    setCriticalAlerts(getCriticalEvents());\n  }, []);\n\n  // Annotate faces on image for workers without hard hats\n  const annotateFaces = (imageSrc: string, analysis: SafetyAnalysis): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => {\n        const canvas = canvasRef.current || document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext('2d');\n        \n        if (!ctx) {\n          reject(new Error('Could not get canvas context'));\n          return;\n        }\n\n        // Draw original image\n        ctx.drawImage(img, 0, 0);\n\n        // Draw squares on faces of workers without hard hats or with non-compliant head coverings\n        analysis.detected.forEach((worker) => {\n          const needsPrivacyBlur = !worker.ppe.hardHat && \n            (worker.ppe.headCovering === 'BARE_HEAD' || \n             worker.ppe.headCovering === 'TURBAN' || \n             worker.ppe.headCovering === 'MUSLIM_TAQIYAH' ||\n             worker.ppe.headCovering === 'UNKNOWN');\n          \n          if (needsPrivacyBlur && worker.faceCoordinates) {\n            const { x, y, width, height } = worker.faceCoordinates;\n            const boxX = (x / 100) * canvas.width;\n            const boxY = (y / 100) * canvas.height;\n            const boxWidth = (width / 100) * canvas.width;\n            const boxHeight = (height / 100) * canvas.height;\n\n            // Draw semi-transparent purple box\n            ctx.fillStyle = 'rgba(168, 85, 247, 0.4)'; // purple-500 with opacity\n            ctx.fillRect(boxX, boxY, boxWidth, boxHeight);\n            \n            // Draw border\n            ctx.strokeStyle = '#a855f7'; // purple-500\n            ctx.lineWidth = 3;\n            ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);\n\n            // Draw label with head covering type\n            ctx.fillStyle = '#7c3aed'; // purple-600\n            ctx.font = 'bold 14px system-ui';\n            let label = '‚ö†Ô∏è NO HARD HAT';\n            if (worker.ppe.headCovering === 'TURBAN') {\n              label = '‚ö†Ô∏è TURBAN (No Hard Hat)';\n            } else if (worker.ppe.headCovering === 'MUSLIM_TAQIYAH') {\n              label = '‚ö†Ô∏è TAQIYAH (No Hard Hat)';\n            } else if (worker.ppe.headCovering === 'BARE_HEAD') {\n              label = '‚ö†Ô∏è BARE HEAD';\n            }\n            ctx.fillText(label, boxX, boxY - 5);\n          }\n        });\n\n        resolve(canvas.toDataURL('image/jpeg', 0.9));\n      };\n      img.onerror = reject;\n      img.src = imageSrc;\n    });\n  };\n\n  const extractFrameFromVideo = (videoFile: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const video = document.createElement('video');\n      video.preload = 'metadata';\n      video.muted = true;\n      video.playsInline = true;\n      \n      video.onloadedmetadata = () => {\n        video.currentTime = Math.min(video.duration / 2, 1);\n      };\n      \n      video.onseeked = () => {\n        try {\n          const canvas = document.createElement('canvas');\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n          const ctx = canvas.getContext('2d');\n          \n          if (!ctx) {\n            reject(new Error('Could not get canvas context'));\n            return;\n          }\n          \n          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n          const frameDataUrl = canvas.toDataURL('image/jpeg', 0.8);\n          resolve(frameDataUrl);\n        } catch (err) {\n          reject(err);\n        }\n      };\n      \n      video.onerror = () => {\n        reject(new Error('Failed to load video'));\n      };\n      \n      video.src = URL.createObjectURL(videoFile);\n    });\n  };\n\n  const speakIntervention = (text: string, level?: string) => {\n    if (!audioEnabled) return;\n    \n    if ('speechSynthesis' in window) {\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.rate = 0.9;\n      utterance.volume = level === 'EMERGENCY_ALARM' || level === 'AUDIO_LEVEL_3' ? 1.0 : \n                         level === 'AUDIO_LEVEL_2' ? 0.8 : 0.6;\n      utterance.pitch = 1.0;\n      window.speechSynthesis.speak(utterance);\n    }\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0];\n    if (selectedFile && selectedFile.type.startsWith('video/')) {\n      setFile(selectedFile);\n      setError(null);\n      setCurrentAnalysis(null);\n      setAnnotatedImage(null);\n    } else {\n      setError('Please select a valid video file');\n    }\n  };\n\n  const handleAnalyze = async () => {\n    if (!file) {\n      setError('Please select a video file first');\n      return;\n    }\n\n    setAnalyzing(true);\n    setAnalysisProgress(0);\n    setError(null);\n    setCurrentAnalysis(null);\n    setAnnotatedImage(null);\n\n    // Simulate progress\n    let progressInterval: NodeJS.Timeout | null = null;\n    progressInterval = setInterval(() => {\n      setAnalysisProgress((prev) => {\n        if (prev >= 90) {\n          if (progressInterval) clearInterval(progressInterval);\n          return 90;\n        }\n        return prev + 10;\n      });\n    }, 200);\n\n    try {\n      let frameImage: string | null = null;\n      try {\n        frameImage = await extractFrameFromVideo(file);\n      } catch (frameError: any) {\n        console.warn('Could not extract frame:', frameError);\n      }\n\n      const formData = new FormData();\n      formData.append('video', file);\n      if (frameImage) {\n        formData.append('frame', frameImage);\n      }\n\n      const response = await fetch('/api/analyze-safety', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        if (progressInterval) clearInterval(progressInterval);\n        let errorMessage = 'Failed to analyze safety frame';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.error || errorData.details || errorMessage;\n        } catch (e) {\n          errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      if (progressInterval) clearInterval(progressInterval);\n      setAnalysisProgress(95);\n\n      const result: SafetyAnalysis = await response.json();\n      setCurrentAnalysis(result);\n      setAnalysisProgress(100);\n      \n      // Wait a moment before hiding progress\n      setTimeout(() => {\n        setAnalysisProgress(0);\n      }, 500);\n\n      // Annotate faces if we have a frame image\n      if (frameImage && result.detected.some(w => !w.ppe.hardHat && w.faceCoordinates)) {\n        try {\n          const annotated = await annotateFaces(frameImage, result);\n          setAnnotatedImage(annotated);\n        } catch (annotError) {\n          console.warn('Failed to annotate faces:', annotError);\n          setAnnotatedImage(frameImage);\n        }\n      } else if (frameImage) {\n        setAnnotatedImage(frameImage);\n      }\n\n      // Save event\n      const videoUrl = URL.createObjectURL(file);\n      const event: SafetyEvent = {\n        id: generateEventId(),\n        timestamp: result.timestamp,\n        status: result.status,\n        workers: result.detected,\n        analysis: Array.isArray(result.analysis) ? result.analysis.join(' ') : result.analysis,\n        action: result.action,\n        voiceOutput: result.voiceOutput,\n        audioLevel: result.audioLevel,\n        resolved: false,\n        videoUrl,\n      };\n      saveSafetyEvent(event);\n\n      // Trigger audio intervention\n      if (result.status !== 'üü¢ CLEAR' && result.voiceOutput) {\n        speakIntervention(result.voiceOutput, result.audioLevel);\n      }\n\n      if (result.status === 'üî¥ CRITICAL DANGER') {\n        setCriticalAlerts(getCriticalEvents());\n      }\n      } catch (err: any) {\n      setError(err.message || 'An error occurred during safety analysis');\n      console.error('Analysis error:', err);\n      setAnalysisProgress(0);\n    } finally {\n      setAnalyzing(false);\n      setTimeout(() => setAnalysisProgress(0), 300);\n    }\n  };\n\n  // Show landing page if not entered\n  if (showLanding) {\n    return <LandingPage onEnter={() => setShowLanding(false)} />;\n  }\n\n  // Show landing page if not entered\n  if (showLanding) {\n    return <LandingPage onEnter={() => setShowLanding(false)} />;\n  }\n\n  const getStatusColor = (status: string) => {\n    if (status.includes('üî¥')) return 'text-red-600 bg-red-50 border-red-200';\n    if (status.includes('üü°')) return 'text-yellow-600 bg-yellow-50 border-yellow-200';\n    return 'text-green-600 bg-green-50 border-green-200';\n  };\n\n  const getZoneColor = (zone: string) => {\n    if (zone === 'ZONE_RED') return 'bg-red-100 text-red-700 border border-red-300';\n    if (zone === 'ZONE_BLACK') return 'bg-gray-900 text-white border-2 border-red-500';\n    if (zone === 'ZONE_YELLOW') return 'bg-yellow-100 text-yellow-800 border border-yellow-300';\n    return 'bg-green-100 text-green-700 border border-green-300';\n  };\n\n  return (\n    <>\n      {/* Progress Indicator */}\n      <HourglassProgress progress={analysisProgress} isActive={analyzing} />\n      \n      <div className=\"min-h-screen bg-white relative overflow-hidden\">\n        {/* Pattern Background */}\n        <div className=\"absolute inset-0 opacity-5\" style={{\n          backgroundImage: `radial-gradient(circle, #9333ea 1px, transparent 1px)`,\n          backgroundSize: '30px 30px'\n        }}></div>\n      \n      {/* Header */}\n      <header className=\"relative border-b-2 border-purple-200 bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-20\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"text-4xl\">üõ°Ô∏è</div>\n              <div>\n                <h1 className=\"text-3xl font-bold bg-gradient-to-r from-purple-600 to-purple-400 bg-clip-text text-transparent\">\n                  SITE GUARDIAN\n                </h1>\n                <p className=\"text-sm text-purple-600 font-medium\">AUTONOMOUS SAFETY SYSTEM</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-6\">\n              <label className=\"flex items-center gap-2 cursor-pointer group\">\n                <input\n                  type=\"checkbox\"\n                  checked={audioEnabled}\n                  onChange={(e) => setAudioEnabled(e.target.checked)}\n                  className=\"w-5 h-5 text-purple-600 rounded focus:ring-purple-500\"\n                />\n                <span className=\"text-sm font-medium text-gray-700 group-hover:text-purple-600 transition-colors\">\n                  üîä Audio Alerts\n                </span>\n              </label>\n              {criticalAlerts.length > 0 && (\n                <div className=\"px-4 py-2 bg-red-100 border-2 border-red-400 rounded-full text-sm font-bold text-red-700 animate-pulse shadow-lg\">\n                  ‚ö†Ô∏è {criticalAlerts.length} CRITICAL\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Video Upload Section */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl border-2 border-purple-100 p-8 shadow-xl\">\n              <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3\">\n                <span className=\"text-3xl\">üìπ</span> Video Feed Analysis\n              </h2>\n              \n              <div className=\"border-2 border-dashed border-purple-300 rounded-xl p-12 text-center hover:border-purple-500 transition-all bg-purple-50/50 mb-6\">\n                <input\n                  type=\"file\"\n                  ref={fileInputRef}\n                  onChange={handleFileChange}\n                  accept=\"video/*\"\n                  className=\"hidden\"\n                />\n                \n                {!file ? (\n                  <div>\n                    <div className=\"text-7xl mb-6\">üé•</div>\n                    <p className=\"text-gray-600 mb-6 text-lg\">Upload construction site video for safety analysis</p>\n                    <button\n                      onClick={() => fileInputRef.current?.click()}\n                      className=\"px-8 py-4 bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white rounded-xl font-semibold text-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105\"\n                    >\n                      Select Video File\n                    </button>\n                  </div>\n                ) : (\n                  <div>\n                    <div className=\"text-5xl mb-4\">‚úì</div>\n                    <p className=\"text-gray-800 mb-2 font-semibold text-lg\">{file.name}</p>\n                    <p className=\"text-sm text-gray-500 mb-6\">\n                      {(file.size / (1024 * 1024)).toFixed(2)} MB\n                    </p>\n                    {videoRef && file && (\n                      <video\n                        ref={videoRef}\n                        src={URL.createObjectURL(file)}\n                        controls\n                        className=\"w-full max-w-2xl mx-auto rounded-xl shadow-lg mb-6\"\n                      />\n                    )}\n                    <div className=\"flex gap-4 justify-center\">\n                      <button\n                        onClick={() => {\n                          setFile(null);\n                          setCurrentAnalysis(null);\n                          setAnnotatedImage(null);\n                          if (fileInputRef.current) fileInputRef.current.value = '';\n                        }}\n                        className=\"px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-xl font-medium transition-all\"\n                      >\n                        Change File\n                      </button>\n                      <button\n                        onClick={handleAnalyze}\n                        disabled={analyzing}\n                        className=\"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all transform hover:scale-105 disabled:transform-none\"\n                      >\n                        {analyzing ? '‚è≥ ANALYZING...' : 'üîç ANALYZE SAFETY'}\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {error && (\n                <div className=\"mt-6 p-4 bg-red-50 border-2 border-red-200 rounded-xl text-red-700\">\n                  {error}\n                </div>\n              )}\n            </div>\n\n            {/* Annotated Image Display */}\n            {annotatedImage && (\n              <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl border-2 border-purple-100 p-6 shadow-xl\">\n                <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Annotated Analysis</h3>\n                <div className=\"relative\">\n                  <img\n                    src={annotatedImage}\n                    alt=\"Safety analysis with face annotations\"\n                    className=\"w-full rounded-xl shadow-lg\"\n                  />\n                  <canvas ref={canvasRef} className=\"hidden\" />\n                </div>\n              </div>\n            )}\n\n            {/* Current Analysis Results */}\n            {currentAnalysis && (\n              <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl border-2 border-purple-100 p-8 shadow-xl\">\n                <div className=\"flex items-center justify-between mb-8\">\n                  <h2 className=\"text-2xl font-bold text-gray-800\">Safety Analysis</h2>\n                  <div className={`px-6 py-3 rounded-xl border-2 font-bold text-lg ${getStatusColor(currentAnalysis.status)}`}>\n                    {currentAnalysis.status}\n                  </div>\n                </div>\n\n                {/* Analysis Bullet Points */}\n                <div className=\"mb-8\">\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Analysis:</h3>\n                  <ul className=\"space-y-3 bg-purple-50 rounded-xl p-6 border border-purple-100\">\n                    {currentAnalysis.analysis.map((point, idx) => (\n                      <li key={idx} className=\"flex items-start gap-3 text-gray-700\">\n                        <span className=\"text-purple-600 font-bold mt-1\">‚Ä¢</span>\n                        <span className=\"flex-1\">{point}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n\n                {/* Detected Workers */}\n                {currentAnalysis.detected && currentAnalysis.detected.length > 0 && (\n                  <div className=\"mb-8\">\n                    <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Detected Workers:</h3>\n                    <div className=\"space-y-4\">\n                      {currentAnalysis.detected.map((worker, idx) => (\n                        <div key={idx} className=\"bg-white border-2 border-purple-100 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow\">\n                          <div className=\"flex items-start justify-between mb-4\">\n                            <p className=\"font-semibold text-gray-800 text-lg\">{worker.description}</p>\n                            <span className={`px-3 py-1 rounded-lg text-sm font-semibold ${getZoneColor(worker.zone)}`}>\n                              {worker.zone}\n                            </span>\n                          </div>\n                          <div className=\"grid grid-cols-3 gap-4\">\n                            <div className={worker.ppe.hardHat ? 'text-green-600 font-medium' : 'text-red-600 font-semibold'}>\n                              {worker.ppe.hardHat ? '‚úì' : '‚úó'} Hard Hat\n                            </div>\n                            <div className={worker.ppe.safetyVest ? 'text-green-600 font-medium' : 'text-red-600 font-semibold'}>\n                              {worker.ppe.safetyVest ? '‚úì' : '‚úó'} Safety Vest\n                            </div>\n                            <div className={worker.ppe.protectiveBoots ? 'text-green-600 font-medium' : 'text-red-600 font-semibold'}>\n                              {worker.ppe.protectiveBoots ? '‚úì' : '‚úó'} Boots\n                            </div>\n                            <div className={worker.ppe.safetyGlasses ? 'text-green-600 font-medium' : 'text-red-600 font-semibold'}>\n                              {worker.ppe.safetyGlasses ? '‚úì' : '‚úó'} Glasses\n                            </div>\n                            <div className={worker.ppe.harness ? 'text-green-600 font-medium' : 'text-red-600 font-semibold'}>\n                              {worker.ppe.harness ? '‚úì' : '‚úó'} Harness\n                            </div>\n                            <div className={worker.compliance ? 'text-green-600 font-semibold' : 'text-red-600 font-semibold'}>\n                              {worker.compliance ? '‚úì Compliant' : '‚úó Violation'}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Action */}\n                <div className=\"mb-8\">\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Action:</h3>\n                  <div className=\"bg-red-50 border-2 border-red-200 p-6 rounded-xl\">\n                    <p className=\"font-mono text-red-700 font-semibold text-lg\">{currentAnalysis.action}</p>\n                  </div>\n                </div>\n\n                {/* Voice Output */}\n                {currentAnalysis.voiceOutput && (\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Audio Intervention:</h3>\n                    <div className=\"bg-yellow-50 border-2 border-yellow-200 p-6 rounded-xl\">\n                      <p className=\"font-mono text-yellow-800 font-semibold text-lg mb-4\">\n                        \"{currentAnalysis.voiceOutput}\"\n                      </p>\n                      {audioEnabled && (\n                        <button\n                          onClick={() => speakIntervention(currentAnalysis.voiceOutput!, currentAnalysis.audioLevel)}\n                          className=\"px-6 py-3 bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl font-semibold transition-all shadow-md hover:shadow-lg\"\n                        >\n                          üîä Replay Audio\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Sidebar - Alerts & Stats */}\n          <div className=\"lg:col-span-1 space-y-6\">\n            <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl border-2 border-purple-100 p-6 shadow-xl\">\n              <h2 className=\"text-xl font-bold text-gray-800 mb-6\">System Status</h2>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between p-4 bg-green-50 rounded-xl border border-green-200\">\n                  <span className=\"text-gray-700 font-medium\">Video Feed</span>\n                  <span className=\"text-green-600 font-bold\">‚úì ONLINE</span>\n                </div>\n                <div className=\"flex items-center justify-between p-4 bg-green-50 rounded-xl border border-green-200\">\n                  <span className=\"text-gray-700 font-medium\">Audio System</span>\n                  <span className={audioEnabled ? 'text-green-600 font-bold' : 'text-gray-400'}>\n                    {audioEnabled ? '‚úì ENABLED' : '‚úó DISABLED'}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between p-4 bg-green-50 rounded-xl border border-green-200\">\n                  <span className=\"text-gray-700 font-medium\">AI Analysis</span>\n                  <span className=\"text-green-600 font-bold\">‚úì ACTIVE</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Critical Alerts */}\n            {criticalAlerts.length > 0 && (\n              <div className=\"bg-red-50 border-2 border-red-300 rounded-2xl p-6 shadow-xl\">\n                <h2 className=\"text-xl font-bold text-red-700 mb-4\">üî¥ Critical Alerts</h2>\n                <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                  {criticalAlerts.slice(0, 5).map((alert) => (\n                    <div key={alert.id} className=\"bg-white p-4 rounded-xl border-2 border-red-200 shadow-sm\">\n                      <p className=\"text-sm text-red-700 font-bold mb-2\">{alert.status}</p>\n                      <p className=\"text-xs text-gray-600 line-clamp-2\">{alert.analysis}</p>\n                      <p className=\"text-xs text-gray-400 mt-2\">\n                        {new Date(alert.timestamp).toLocaleTimeString()}\n                      </p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n    </main>\n    </div>\n    </>\n  );\n}\n","// Safety event storage and logging system\n\nexport interface SafetyEvent {\n  id: string;\n  timestamp: string;\n  status: 'üî¥ CRITICAL DANGER' | 'üü° WARNING' | 'üü¢ CLEAR';\n  workers: any[];\n  analysis: string;\n  action: string;\n  voiceOutput: string;\n  audioLevel?: string;\n  resolved: boolean;\n  videoUrl?: string;\n}\n\nconst STORAGE_KEY = 'site_guardian_events';\n\nexport function saveSafetyEvent(event: SafetyEvent): void {\n  if (typeof window === 'undefined') return;\n  \n  const existing = getAllSafetyEvents();\n  existing.unshift(event); // Add to beginning (most recent first)\n  // Keep only last 100 events\n  if (existing.length > 100) {\n    existing.splice(100);\n  }\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(existing));\n}\n\nexport function getAllSafetyEvents(): SafetyEvent[] {\n  if (typeof window === 'undefined') return [];\n  \n  const stored = localStorage.getItem(STORAGE_KEY);\n  return stored ? JSON.parse(stored) : [];\n}\n\nexport function getSafetyEventById(id: string): SafetyEvent | null {\n  const events = getAllSafetyEvents();\n  return events.find(e => e.id === id) || null;\n}\n\nexport function markEventResolved(id: string): void {\n  if (typeof window === 'undefined') return;\n  \n  const events = getAllSafetyEvents();\n  const event = events.find(e => e.id === id);\n  if (event) {\n    event.resolved = true;\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(events));\n  }\n}\n\nexport function deleteSafetyEvent(id: string): void {\n  if (typeof window === 'undefined') return;\n  \n  const events = getAllSafetyEvents().filter(e => e.id !== id);\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(events));\n}\n\nexport function generateEventId(): string {\n  return `EVENT_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nexport function getCriticalEvents(): SafetyEvent[] {\n  return getAllSafetyEvents().filter(e => e.status === 'üî¥ CRITICAL DANGER' && !e.resolved);\n}\n\n","'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\n\nexport default function LandingPage({ onEnter }: { onEnter: () => void }) {\n  const [hovered, setHovered] = useState(false);\n\n  return (\n    <div className=\"min-h-screen relative overflow-hidden bg-white\">\n      {/* Layered Background Pattern */}\n      <div className=\"absolute inset-0 opacity-5\" style={{\n        backgroundImage: `radial-gradient(circle, #9333ea 1px, transparent 1px)`,\n        backgroundSize: '40px 40px'\n      }}></div>\n      \n      <div className=\"absolute inset-0 opacity-10\" style={{\n        backgroundImage: `linear-gradient(45deg, transparent 40%, rgba(147, 51, 234, 0.1) 50%, transparent 60%)`,\n        backgroundSize: '60px 60px'\n      }}></div>\n\n      {/* Floating Layers */}\n      <div className=\"absolute top-20 left-10 w-72 h-72 bg-purple-200/20 rounded-full blur-3xl animate-pulse\"></div>\n      <div className=\"absolute bottom-20 right-10 w-96 h-96 bg-purple-300/20 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n      <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-purple-100/10 rounded-full blur-3xl\"></div>\n\n      {/* Content */}\n      <div className=\"relative z-10 min-h-screen flex flex-col items-center justify-center px-4\">\n        {/* Main Title with Layers */}\n        <div className=\"text-center mb-12 space-y-6 transform transition-all duration-1000\">\n          <div className=\"relative\">\n            <h1 className=\"text-8xl md:text-9xl font-black mb-4 bg-gradient-to-r from-purple-600 via-purple-500 to-purple-600 bg-clip-text text-transparent animate-gradient drop-shadow-2xl\">\n              SITE\n            </h1>\n            <div className=\"absolute inset-0 text-8xl md:text-9xl font-black opacity-20 blur-xl bg-gradient-to-r from-purple-600 to-purple-400 bg-clip-text text-transparent\">\n              SITE\n            </div>\n          </div>\n          \n          <div className=\"relative\">\n            <h2 className=\"text-8xl md:text-9xl font-black bg-gradient-to-r from-purple-500 via-purple-600 to-purple-500 bg-clip-text text-transparent animate-gradient drop-shadow-2xl\">\n              GUARDIAN\n            </h2>\n            <div className=\"absolute inset-0 text-8xl md:text-9xl font-black opacity-20 blur-xl bg-gradient-to-r from-purple-500 to-purple-600 bg-clip-text text-transparent\">\n              GUARDIAN\n            </div>\n          </div>\n\n          <div className=\"text-6xl md:text-7xl mb-8\">üõ°Ô∏è</div>\n        </div>\n\n        {/* Subtitle */}\n        <p className=\"text-2xl md:text-3xl text-gray-700 font-light mb-4 max-w-2xl text-center\">\n          Autonomous Construction Safety System\n        </p>\n        <p className=\"text-lg md:text-xl text-gray-600 mb-16 max-w-xl text-center\">\n          AI-Powered Computer Vision that detects safety violations in real-time\n          and intervenes to prevent accidents before they happen\n        </p>\n\n        {/* Feature Cards with Depth */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16 max-w-5xl w-full\">\n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border-2 border-purple-100 hover:shadow-2xl hover:scale-105 transition-all transform\">\n            <div className=\"text-5xl mb-4\">üëÅÔ∏è</div>\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">Real-Time Vision</h3>\n            <p className=\"text-gray-600\">Continuous video analysis with instant hazard detection</p>\n          </div>\n          \n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border-2 border-purple-100 hover:shadow-2xl hover:scale-105 transition-all transform\">\n            <div className=\"text-5xl mb-4\">üéØ</div>\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">PPE Detection</h3>\n            <p className=\"text-gray-600\">Identifies missing safety equipment with precision</p>\n          </div>\n          \n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border-2 border-purple-100 hover:shadow-2xl hover:scale-105 transition-all transform\">\n            <div className=\"text-5xl mb-4\">üîä</div>\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">Active Intervention</h3>\n            <p className=\"text-gray-600\">Immediate audio alerts to prevent accidents</p>\n          </div>\n        </div>\n\n        {/* Enter Button with Hover Effect */}\n        <button\n          onClick={onEnter}\n          onMouseEnter={() => setHovered(true)}\n          onMouseLeave={() => setHovered(false)}\n          className=\"group relative px-16 py-6 bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white rounded-2xl font-bold text-2xl shadow-2xl hover:shadow-purple-500/50 transition-all transform hover:scale-110 duration-300 overflow-hidden\"\n        >\n          <span className=\"relative z-10 flex items-center gap-3\">\n            <span>ENTER SYSTEM</span>\n            <span className=\"transform group-hover:translate-x-2 transition-transform\">‚Üí</span>\n          </span>\n          <div className=\"absolute inset-0 bg-gradient-to-r from-purple-700 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity\"></div>\n          <div className=\"absolute inset-0 bg-white/20 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500\"></div>\n        </button>\n\n        {/* Footer Info */}\n        <p className=\"mt-16 text-sm text-gray-500\">\n          ZERO_HARM through active intervention ‚Ä¢ AUTHORITY_LEVEL: MAX_SAFETY_OVERRIDE\n        </p>\n      </div>\n    </div>\n  );\n}\n\n","'use client';\n\ninterface HourglassProgressProps {\n  progress: number; // 0-100\n  isActive: boolean;\n}\n\nexport default function HourglassProgress({ progress, isActive }: HourglassProgressProps) {\n  const upperFill = progress > 50 ? 0 : 100 - (progress * 2);\n  const lowerFill = progress <= 50 ? 0 : (progress - 50) * 2;\n\n  if (!isActive) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-md\">\n      <div className=\"text-center\">\n        <div className=\"relative w-32 h-40 mx-auto mb-6\">\n          {/* Hourglass Container */}\n          <svg\n            viewBox=\"0 0 120 160\"\n            className=\"w-full h-full drop-shadow-2xl\"\n          >\n            {/* Upper Section */}\n            <path\n              d=\"M 20 20 L 60 60 L 100 20 Z\"\n              fill=\"none\"\n              stroke=\"#9333ea\"\n              strokeWidth=\"3\"\n            />\n            \n            {/* Upper Sand */}\n            {progress <= 50 && (\n              <rect\n                x=\"20\"\n                y={20 + (upperFill * 0.4)}\n                width=\"80\"\n                height={40 - (upperFill * 0.4)}\n                fill=\"#c084fc\"\n                opacity=\"0.8\"\n              />\n            )}\n\n            {/* Middle Connector */}\n            <rect x=\"55\" y=\"60\" width=\"10\" height=\"8\" fill=\"#9333ea\" />\n\n            {/* Lower Section */}\n            <path\n              d=\"M 20 68 L 60 28 L 100 68 L 100 140 L 20 140 Z\"\n              fill=\"none\"\n              stroke=\"#9333ea\"\n              strokeWidth=\"3\"\n            />\n\n            {/* Lower Sand */}\n            {progress > 50 && (\n              <rect\n                x=\"20\"\n                y={140 - (lowerFill * 0.72)}\n                width=\"80\"\n                height={lowerFill * 0.72}\n                fill=\"#c084fc\"\n                opacity=\"0.8\"\n              />\n            )}\n\n            {/* Falling Sand */}\n            {progress > 45 && progress < 55 && (\n              <circle\n                cx=\"60\"\n                cy={60 + ((progress - 45) * 4)}\n                r=\"3\"\n                fill=\"#c084fc\"\n              />\n            )}\n          </svg>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <p className=\"text-2xl font-bold text-purple-600 animate-pulse\">\n            ANALYZING SAFETY...\n          </p>\n          <p className=\"text-lg text-purple-500 font-semibold\">\n            {Math.round(progress)}%\n          </p>\n          <div className=\"w-64 h-2 bg-purple-100 rounded-full overflow-hidden mx-auto\">\n            <div\n              className=\"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-300 ease-out rounded-full\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}