{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/stavansagala/Downloads/MadHacks%202025/src/lib/safety-storage.ts"],"sourcesContent":["// Safety event storage and logging system\n\nexport interface SafetyEvent {\n  id: string;\n  timestamp: string;\n  status: 'üî¥ CRITICAL DANGER' | 'üü° WARNING' | 'üü¢ CLEAR';\n  workers: any[];\n  analysis: string;\n  action: string;\n  voiceOutput: string;\n  audioLevel?: string;\n  resolved: boolean;\n  videoUrl?: string;\n}\n\nconst STORAGE_KEY = 'site_guardian_events';\n\nexport function saveSafetyEvent(event: SafetyEvent): void {\n  if (typeof window === 'undefined') return;\n  \n  const existing = getAllSafetyEvents();\n  existing.unshift(event); // Add to beginning (most recent first)\n  // Keep only last 100 events\n  if (existing.length > 100) {\n    existing.splice(100);\n  }\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(existing));\n}\n\nexport function getAllSafetyEvents(): SafetyEvent[] {\n  if (typeof window === 'undefined') return [];\n  \n  const stored = localStorage.getItem(STORAGE_KEY);\n  return stored ? JSON.parse(stored) : [];\n}\n\nexport function getSafetyEventById(id: string): SafetyEvent | null {\n  const events = getAllSafetyEvents();\n  return events.find(e => e.id === id) || null;\n}\n\nexport function markEventResolved(id: string): void {\n  if (typeof window === 'undefined') return;\n  \n  const events = getAllSafetyEvents();\n  const event = events.find(e => e.id === id);\n  if (event) {\n    event.resolved = true;\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(events));\n  }\n}\n\nexport function deleteSafetyEvent(id: string): void {\n  if (typeof window === 'undefined') return;\n  \n  const events = getAllSafetyEvents().filter(e => e.id !== id);\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(events));\n}\n\nexport function generateEventId(): string {\n  return `EVENT_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nexport function getCriticalEvents(): SafetyEvent[] {\n  return getAllSafetyEvents().filter(e => e.status === 'üî¥ CRITICAL DANGER' && !e.resolved);\n}\n\n"],"names":[],"mappings":"AAAA,0CAA0C;;;;;;;;;;;;;;;;;AAe1C,MAAM,cAAc;AAEb,SAAS,gBAAgB,KAAkB;IAChD,wCAAmC;;;IAEnC,MAAM;AAOR;AAEO,SAAS;IACd,wCAAmC,OAAO,EAAE;;;IAE5C,MAAM;AAER;AAEO,SAAS,mBAAmB,EAAU;IAC3C,MAAM,SAAS;IACf,OAAO,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO;AAC1C;AAEO,SAAS,kBAAkB,EAAU;IAC1C,wCAAmC;;;IAEnC,MAAM;IACN,MAAM;AAKR;AAEO,SAAS,kBAAkB,EAAU;IAC1C,wCAAmC;;;IAEnC,MAAM;AAER;AAEO,SAAS;IACd,OAAO,CAAC,MAAM,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;AACzE;AAEO,SAAS;IACd,OAAO,qBAAqB,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK,wBAAwB,CAAC,EAAE,QAAQ;AAC1F"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/stavansagala/Downloads/MadHacks%202025/src/app/components/LandingPage.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\n\nexport default function LandingPage({ onEnter }: { onEnter: () => void }) {\n  const [hovered, setHovered] = useState(false);\n\n  return (\n    <div className=\"min-h-screen relative overflow-hidden bg-white\">\n      {/* Layered Background Pattern */}\n      <div className=\"absolute inset-0 opacity-5\" style={{\n        backgroundImage: `radial-gradient(circle, #9333ea 1px, transparent 1px)`,\n        backgroundSize: '40px 40px'\n      }}></div>\n      \n      <div className=\"absolute inset-0 opacity-10\" style={{\n        backgroundImage: `linear-gradient(45deg, transparent 40%, rgba(147, 51, 234, 0.1) 50%, transparent 60%)`,\n        backgroundSize: '60px 60px'\n      }}></div>\n\n      {/* Floating Layers */}\n      <div className=\"absolute top-20 left-10 w-72 h-72 bg-purple-200/20 rounded-full blur-3xl animate-pulse\"></div>\n      <div className=\"absolute bottom-20 right-10 w-96 h-96 bg-purple-300/20 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n      <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-purple-100/10 rounded-full blur-3xl\"></div>\n\n      {/* Content */}\n      <div className=\"relative z-10 min-h-screen flex flex-col items-center justify-center px-4\">\n        {/* Main Title with Layers */}\n        <div className=\"text-center mb-12 space-y-6 transform transition-all duration-1000\">\n          <div className=\"relative\">\n            <h1 className=\"text-8xl md:text-9xl font-black mb-4 bg-gradient-to-r from-purple-600 via-purple-500 to-purple-600 bg-clip-text text-transparent animate-gradient drop-shadow-2xl\">\n              SITE\n            </h1>\n            <div className=\"absolute inset-0 text-8xl md:text-9xl font-black opacity-20 blur-xl bg-gradient-to-r from-purple-600 to-purple-400 bg-clip-text text-transparent\">\n              SITE\n            </div>\n          </div>\n          \n          <div className=\"relative\">\n            <h2 className=\"text-8xl md:text-9xl font-black bg-gradient-to-r from-purple-500 via-purple-600 to-purple-500 bg-clip-text text-transparent animate-gradient drop-shadow-2xl\">\n              GUARDIAN\n            </h2>\n            <div className=\"absolute inset-0 text-8xl md:text-9xl font-black opacity-20 blur-xl bg-gradient-to-r from-purple-500 to-purple-600 bg-clip-text text-transparent\">\n              GUARDIAN\n            </div>\n          </div>\n\n          <div className=\"text-6xl md:text-7xl mb-8\">üõ°Ô∏è</div>\n        </div>\n\n        {/* Subtitle */}\n        <p className=\"text-2xl md:text-3xl text-gray-700 font-light mb-4 max-w-2xl text-center\">\n          Autonomous Construction Safety System\n        </p>\n        <p className=\"text-lg md:text-xl text-gray-600 mb-16 max-w-xl text-center\">\n          AI-Powered Computer Vision that detects safety violations in real-time\n          and intervenes to prevent accidents before they happen\n        </p>\n\n        {/* Feature Cards with Depth */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16 max-w-5xl w-full\">\n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border-2 border-purple-100 hover:shadow-2xl hover:scale-105 transition-all transform\">\n            <div className=\"text-5xl mb-4\">üëÅÔ∏è</div>\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">Real-Time Vision</h3>\n            <p className=\"text-gray-600\">Continuous video analysis with instant hazard detection</p>\n          </div>\n          \n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border-2 border-purple-100 hover:shadow-2xl hover:scale-105 transition-all transform\">\n            <div className=\"text-5xl mb-4\">üéØ</div>\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">PPE Detection</h3>\n            <p className=\"text-gray-600\">Identifies missing safety equipment with precision</p>\n          </div>\n          \n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border-2 border-purple-100 hover:shadow-2xl hover:scale-105 transition-all transform\">\n            <div className=\"text-5xl mb-4\">üîä</div>\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">Active Intervention</h3>\n            <p className=\"text-gray-600\">Immediate audio alerts to prevent accidents</p>\n          </div>\n        </div>\n\n        {/* Enter Button with Hover Effect */}\n        <button\n          onClick={onEnter}\n          onMouseEnter={() => setHovered(true)}\n          onMouseLeave={() => setHovered(false)}\n          className=\"group relative px-16 py-6 bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white rounded-2xl font-bold text-2xl shadow-2xl hover:shadow-purple-500/50 transition-all transform hover:scale-110 duration-300 overflow-hidden\"\n        >\n          <span className=\"relative z-10 flex items-center gap-3\">\n            <span>ENTER SYSTEM</span>\n            <span className=\"transform group-hover:translate-x-2 transition-transform\">‚Üí</span>\n          </span>\n          <div className=\"absolute inset-0 bg-gradient-to-r from-purple-700 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity\"></div>\n          <div className=\"absolute inset-0 bg-white/20 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-500\"></div>\n        </button>\n\n        {/* Footer Info */}\n        <p className=\"mt-16 text-sm text-gray-500\">\n          ZERO_HARM through active intervention ‚Ä¢ AUTHORITY_LEVEL: MAX_SAFETY_OVERRIDE\n        </p>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKe,SAAS,YAAY,EAAE,OAAO,EAA2B;IACtE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;gBAA6B,OAAO;oBACjD,iBAAiB,CAAC,qDAAqD,CAAC;oBACxE,gBAAgB;gBAClB;;;;;;0BAEA,8OAAC;gBAAI,WAAU;gBAA8B,OAAO;oBAClD,iBAAiB,CAAC,qFAAqF,CAAC;oBACxG,gBAAgB;gBAClB;;;;;;0BAGA,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBAAI,WAAU;;;;;;0BAGf,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDAAoK;;;;;;kDAGlL,8OAAC;wCAAI,WAAU;kDAAmJ;;;;;;;;;;;;0CAKpK,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDAA+J;;;;;;kDAG7K,8OAAC;wCAAI,WAAU;kDAAmJ;;;;;;;;;;;;0CAKpK,8OAAC;gCAAI,WAAU;0CAA4B;;;;;;;;;;;;kCAI7C,8OAAC;wBAAE,WAAU;kCAA2E;;;;;;kCAGxF,8OAAC;wBAAE,WAAU;kCAA8D;;;;;;kCAM3E,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAgB;;;;;;kDAC/B,8OAAC;wCAAG,WAAU;kDAAuC;;;;;;kDACrD,8OAAC;wCAAE,WAAU;kDAAgB;;;;;;;;;;;;0CAG/B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAgB;;;;;;kDAC/B,8OAAC;wCAAG,WAAU;kDAAuC;;;;;;kDACrD,8OAAC;wCAAE,WAAU;kDAAgB;;;;;;;;;;;;0CAG/B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAgB;;;;;;kDAC/B,8OAAC;wCAAG,WAAU;kDAAuC;;;;;;kDACrD,8OAAC;wCAAE,WAAU;kDAAgB;;;;;;;;;;;;;;;;;;kCAKjC,8OAAC;wBACC,SAAS;wBACT,cAAc,IAAM,WAAW;wBAC/B,cAAc,IAAM,WAAW;wBAC/B,WAAU;;0CAEV,8OAAC;gCAAK,WAAU;;kDACd,8OAAC;kDAAK;;;;;;kDACN,8OAAC;wCAAK,WAAU;kDAA2D;;;;;;;;;;;;0CAE7E,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;;;;;;;kCAIjB,8OAAC;wBAAE,WAAU;kCAA8B;;;;;;;;;;;;;;;;;;AAMnD"}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///Users/stavansagala/Downloads/MadHacks%202025/src/app/components/HourglassProgress.tsx"],"sourcesContent":["'use client';\n\ninterface HourglassProgressProps {\n  progress: number; // 0-100\n  isActive: boolean;\n}\n\nexport default function HourglassProgress({ progress, isActive }: HourglassProgressProps) {\n  const upperFill = progress > 50 ? 0 : 100 - (progress * 2);\n  const lowerFill = progress <= 50 ? 0 : (progress - 50) * 2;\n\n  if (!isActive) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-md\">\n      <div className=\"text-center\">\n        <div className=\"relative w-32 h-40 mx-auto mb-6\">\n          {/* Hourglass Container */}\n          <svg\n            viewBox=\"0 0 120 160\"\n            className=\"w-full h-full drop-shadow-2xl\"\n          >\n            {/* Upper Section */}\n            <path\n              d=\"M 20 20 L 60 60 L 100 20 Z\"\n              fill=\"none\"\n              stroke=\"#9333ea\"\n              strokeWidth=\"3\"\n            />\n            \n            {/* Upper Sand */}\n            {progress <= 50 && (\n              <rect\n                x=\"20\"\n                y={20 + (upperFill * 0.4)}\n                width=\"80\"\n                height={40 - (upperFill * 0.4)}\n                fill=\"#c084fc\"\n                opacity=\"0.8\"\n              />\n            )}\n\n            {/* Middle Connector */}\n            <rect x=\"55\" y=\"60\" width=\"10\" height=\"8\" fill=\"#9333ea\" />\n\n            {/* Lower Section */}\n            <path\n              d=\"M 20 68 L 60 28 L 100 68 L 100 140 L 20 140 Z\"\n              fill=\"none\"\n              stroke=\"#9333ea\"\n              strokeWidth=\"3\"\n            />\n\n            {/* Lower Sand */}\n            {progress > 50 && (\n              <rect\n                x=\"20\"\n                y={140 - (lowerFill * 0.72)}\n                width=\"80\"\n                height={lowerFill * 0.72}\n                fill=\"#c084fc\"\n                opacity=\"0.8\"\n              />\n            )}\n\n            {/* Falling Sand */}\n            {progress > 45 && progress < 55 && (\n              <circle\n                cx=\"60\"\n                cy={60 + ((progress - 45) * 4)}\n                r=\"3\"\n                fill=\"#c084fc\"\n              />\n            )}\n          </svg>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <p className=\"text-2xl font-bold text-purple-600 animate-pulse\">\n            ANALYZING SAFETY...\n          </p>\n          <p className=\"text-lg text-purple-500 font-semibold\">\n            {Math.round(progress)}%\n          </p>\n          <div className=\"w-64 h-2 bg-purple-100 rounded-full overflow-hidden mx-auto\">\n            <div\n              className=\"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-300 ease-out rounded-full\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAAA;;AAOe,SAAS,kBAAkB,EAAE,QAAQ,EAAE,QAAQ,EAA0B;IACtF,MAAM,YAAY,WAAW,KAAK,IAAI,MAAO,WAAW;IACxD,MAAM,YAAY,YAAY,KAAK,IAAI,CAAC,WAAW,EAAE,IAAI;IAEzD,IAAI,CAAC,UAAU,OAAO;IAEtB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BAEb,cAAA,8OAAC;wBACC,SAAQ;wBACR,WAAU;;0CAGV,8OAAC;gCACC,GAAE;gCACF,MAAK;gCACL,QAAO;gCACP,aAAY;;;;;;4BAIb,YAAY,oBACX,8OAAC;gCACC,GAAE;gCACF,GAAG,KAAM,YAAY;gCACrB,OAAM;gCACN,QAAQ,KAAM,YAAY;gCAC1B,MAAK;gCACL,SAAQ;;;;;;0CAKZ,8OAAC;gCAAK,GAAE;gCAAK,GAAE;gCAAK,OAAM;gCAAK,QAAO;gCAAI,MAAK;;;;;;0CAG/C,8OAAC;gCACC,GAAE;gCACF,MAAK;gCACL,QAAO;gCACP,aAAY;;;;;;4BAIb,WAAW,oBACV,8OAAC;gCACC,GAAE;gCACF,GAAG,MAAO,YAAY;gCACtB,OAAM;gCACN,QAAQ,YAAY;gCACpB,MAAK;gCACL,SAAQ;;;;;;4BAKX,WAAW,MAAM,WAAW,oBAC3B,8OAAC;gCACC,IAAG;gCACH,IAAI,KAAM,CAAC,WAAW,EAAE,IAAI;gCAC5B,GAAE;gCACF,MAAK;;;;;;;;;;;;;;;;;8BAMb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAAmD;;;;;;sCAGhE,8OAAC;4BAAE,WAAU;;gCACV,KAAK,KAAK,CAAC;gCAAU;;;;;;;sCAExB,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCACC,WAAU;gCACV,OAAO;oCAAE,OAAO,GAAG,SAAS,CAAC,CAAC;gCAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO7C"}},
    {"offset": {"line": 552, "column": 0}, "map": {"version":3,"sources":["file:///Users/stavansagala/Downloads/MadHacks%202025/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { saveSafetyEvent, generateEventId, getCriticalEvents } from '@/lib/safety-storage';\nimport type { SafetyAnalysis } from '@/lib/site-guardian';\nimport type { SafetyEvent } from '@/lib/safety-storage';\nimport LandingPage from './components/LandingPage';\nimport HourglassProgress from './components/HourglassProgress';\n\nexport default function SiteGuardianDashboard() {\n  const [showLanding, setShowLanding] = useState(true);\n  const [file, setFile] = useState<File | null>(null);\n  const [analyzing, setAnalyzing] = useState(false);\n  const [analysisProgress, setAnalysisProgress] = useState(0);\n  const [currentAnalysis, setCurrentAnalysis] = useState<SafetyAnalysis | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [audioEnabled, setAudioEnabled] = useState(true);\n  const [criticalAlerts, setCriticalAlerts] = useState<SafetyEvent[]>([]);\n  const [annotatedImage, setAnnotatedImage] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    setCriticalAlerts(getCriticalEvents());\n  }, []);\n\n  // Annotate faces on image for workers without hard hats\n  const annotateFaces = (imageSrc: string, analysis: SafetyAnalysis): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => {\n        const canvas = canvasRef.current || document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext('2d');\n        \n        if (!ctx) {\n          reject(new Error('Could not get canvas context'));\n          return;\n        }\n\n        // Draw original image\n        ctx.drawImage(img, 0, 0);\n\n        // Draw squares on faces of workers without hard hats or with non-compliant head coverings\n        analysis.detected.forEach((worker) => {\n          const needsPrivacyBlur = !worker.ppe.hardHat && \n            (worker.ppe.headCovering === 'BARE_HEAD' || \n             worker.ppe.headCovering === 'TURBAN' || \n             worker.ppe.headCovering === 'MUSLIM_TAQIYAH' ||\n             worker.ppe.headCovering === 'UNKNOWN');\n          \n          if (needsPrivacyBlur && worker.faceCoordinates) {\n            const { x, y, width, height } = worker.faceCoordinates;\n            const boxX = (x / 100) * canvas.width;\n            const boxY = (y / 100) * canvas.height;\n            const boxWidth = (width / 100) * canvas.width;\n            const boxHeight = (height / 100) * canvas.height;\n\n            // Draw semi-transparent purple box\n            ctx.fillStyle = 'rgba(168, 85, 247, 0.4)'; // purple-500 with opacity\n            ctx.fillRect(boxX, boxY, boxWidth, boxHeight);\n            \n            // Draw border\n            ctx.strokeStyle = '#a855f7'; // purple-500\n            ctx.lineWidth = 3;\n            ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);\n\n            // Draw label with head covering type\n            ctx.fillStyle = '#7c3aed'; // purple-600\n            ctx.font = 'bold 14px system-ui';\n            let label = '‚ö†Ô∏è NO HARD HAT';\n            if (worker.ppe.headCovering === 'TURBAN') {\n              label = '‚ö†Ô∏è TURBAN (No Hard Hat)';\n            } else if (worker.ppe.headCovering === 'MUSLIM_TAQIYAH') {\n              label = '‚ö†Ô∏è TAQIYAH (No Hard Hat)';\n            } else if (worker.ppe.headCovering === 'BARE_HEAD') {\n              label = '‚ö†Ô∏è BARE HEAD';\n            }\n            ctx.fillText(label, boxX, boxY - 5);\n          }\n        });\n\n        resolve(canvas.toDataURL('image/jpeg', 0.9));\n      };\n      img.onerror = reject;\n      img.src = imageSrc;\n    });\n  };\n\n  const extractFrameFromVideo = (videoFile: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const video = document.createElement('video');\n      video.preload = 'metadata';\n      video.muted = true;\n      video.playsInline = true;\n      \n      video.onloadedmetadata = () => {\n        video.currentTime = Math.min(video.duration / 2, 1);\n      };\n      \n      video.onseeked = () => {\n        try {\n          const canvas = document.createElement('canvas');\n          canvas.width = video.videoWidth;\n          canvas.height = video.videoHeight;\n          const ctx = canvas.getContext('2d');\n          \n          if (!ctx) {\n            reject(new Error('Could not get canvas context'));\n            return;\n          }\n          \n          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n          const frameDataUrl = canvas.toDataURL('image/jpeg', 0.8);\n          resolve(frameDataUrl);\n        } catch (err) {\n          reject(err);\n        }\n      };\n      \n      video.onerror = () => {\n        reject(new Error('Failed to load video'));\n      };\n      \n      video.src = URL.createObjectURL(videoFile);\n    });\n  };\n\n  const speakIntervention = (text: string, level?: string) => {\n    if (!audioEnabled) return;\n    \n    if ('speechSynthesis' in window) {\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.rate = 0.9;\n      utterance.volume = level === 'EMERGENCY_ALARM' || level === 'AUDIO_LEVEL_3' ? 1.0 : \n                         level === 'AUDIO_LEVEL_2' ? 0.8 : 0.6;\n      utterance.pitch = 1.0;\n      window.speechSynthesis.speak(utterance);\n    }\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0];\n    if (selectedFile && selectedFile.type.startsWith('video/')) {\n      setFile(selectedFile);\n      setError(null);\n      setCurrentAnalysis(null);\n      setAnnotatedImage(null);\n    } else {\n      setError('Please select a valid video file');\n    }\n  };\n\n  const handleAnalyze = async () => {\n    if (!file) {\n      setError('Please select a video file first');\n      return;\n    }\n\n    setAnalyzing(true);\n    setAnalysisProgress(0);\n    setError(null);\n    setCurrentAnalysis(null);\n    setAnnotatedImage(null);\n\n    // Simulate progress\n    let progressInterval: NodeJS.Timeout | null = null;\n    progressInterval = setInterval(() => {\n      setAnalysisProgress((prev) => {\n        if (prev >= 90) {\n          if (progressInterval) clearInterval(progressInterval);\n          return 90;\n        }\n        return prev + 10;\n      });\n    }, 200);\n\n    try {\n      let frameImage: string | null = null;\n      try {\n        frameImage = await extractFrameFromVideo(file);\n      } catch (frameError: any) {\n        console.warn('Could not extract frame:', frameError);\n      }\n\n      const formData = new FormData();\n      formData.append('video', file);\n      if (frameImage) {\n        formData.append('frame', frameImage);\n      }\n\n      const response = await fetch('/api/analyze-safety', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        if (progressInterval) clearInterval(progressInterval);\n        let errorMessage = 'Failed to analyze safety frame';\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.error || errorData.details || errorMessage;\n        } catch (e) {\n          errorMessage = `HTTP ${response.status}: ${response.statusText}`;\n        }\n        throw new Error(errorMessage);\n      }\n\n      if (progressInterval) clearInterval(progressInterval);\n      setAnalysisProgress(95);\n\n      const result: SafetyAnalysis = await response.json();\n      setCurrentAnalysis(result);\n      setAnalysisProgress(100);\n      \n      // Wait a moment before hiding progress\n      setTimeout(() => {\n        setAnalysisProgress(0);\n      }, 500);\n\n      // Annotate faces if we have a frame image\n      if (frameImage && result.detected.some(w => !w.ppe.hardHat && w.faceCoordinates)) {\n        try {\n          const annotated = await annotateFaces(frameImage, result);\n          setAnnotatedImage(annotated);\n        } catch (annotError) {\n          console.warn('Failed to annotate faces:', annotError);\n          setAnnotatedImage(frameImage);\n        }\n      } else if (frameImage) {\n        setAnnotatedImage(frameImage);\n      }\n\n      // Save event\n      const videoUrl = URL.createObjectURL(file);\n      const event: SafetyEvent = {\n        id: generateEventId(),\n        timestamp: result.timestamp,\n        status: result.status,\n        workers: result.detected,\n        analysis: Array.isArray(result.analysis) ? result.analysis.join(' ') : result.analysis,\n        action: result.action,\n        voiceOutput: result.voiceOutput,\n        audioLevel: result.audioLevel,\n        resolved: false,\n        videoUrl,\n      };\n      saveSafetyEvent(event);\n\n      // Trigger audio intervention\n      if (result.status !== 'üü¢ CLEAR' && result.voiceOutput) {\n        speakIntervention(result.voiceOutput, result.audioLevel);\n      }\n\n      if (result.status === 'üî¥ CRITICAL DANGER') {\n        setCriticalAlerts(getCriticalEvents());\n      }\n      } catch (err: any) {\n      setError(err.message || 'An error occurred during safety analysis');\n      console.error('Analysis error:', err);\n      setAnalysisProgress(0);\n    } finally {\n      setAnalyzing(false);\n      setTimeout(() => setAnalysisProgress(0), 300);\n    }\n  };\n\n  // Show landing page if not entered\n  if (showLanding) {\n    return <LandingPage onEnter={() => setShowLanding(false)} />;\n  }\n\n  // Show landing page if not entered\n  if (showLanding) {\n    return <LandingPage onEnter={() => setShowLanding(false)} />;\n  }\n\n  const getStatusColor = (status: string) => {\n    if (status.includes('üî¥')) return 'text-red-600 bg-red-50 border-red-200';\n    if (status.includes('üü°')) return 'text-yellow-600 bg-yellow-50 border-yellow-200';\n    return 'text-green-600 bg-green-50 border-green-200';\n  };\n\n  const getZoneColor = (zone: string) => {\n    if (zone === 'ZONE_RED') return 'bg-red-100 text-red-700 border border-red-300';\n    if (zone === 'ZONE_BLACK') return 'bg-gray-900 text-white border-2 border-red-500';\n    if (zone === 'ZONE_YELLOW') return 'bg-yellow-100 text-yellow-800 border border-yellow-300';\n    return 'bg-green-100 text-green-700 border border-green-300';\n  };\n\n  return (\n    <>\n      {/* Progress Indicator */}\n      <HourglassProgress progress={analysisProgress} isActive={analyzing} />\n      \n      <div className=\"min-h-screen bg-white relative overflow-hidden\">\n        {/* Pattern Background */}\n        <div className=\"absolute inset-0 opacity-5\" style={{\n          backgroundImage: `radial-gradient(circle, #9333ea 1px, transparent 1px)`,\n          backgroundSize: '30px 30px'\n        }}></div>\n      \n      {/* Header */}\n      <header className=\"relative border-b-2 border-purple-200 bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-20\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"text-4xl\">üõ°Ô∏è</div>\n              <div>\n                <h1 className=\"text-3xl font-bold bg-gradient-to-r from-purple-600 to-purple-400 bg-clip-text text-transparent\">\n                  SITE GUARDIAN\n                </h1>\n                <p className=\"text-sm text-purple-600 font-medium\">AUTONOMOUS SAFETY SYSTEM</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-6\">\n              <label className=\"flex items-center gap-2 cursor-pointer group\">\n                <input\n                  type=\"checkbox\"\n                  checked={audioEnabled}\n                  onChange={(e) => setAudioEnabled(e.target.checked)}\n                  className=\"w-5 h-5 text-purple-600 rounded focus:ring-purple-500\"\n                />\n                <span className=\"text-sm font-medium text-gray-700 group-hover:text-purple-600 transition-colors\">\n                  üîä Audio Alerts\n                </span>\n              </label>\n              {criticalAlerts.length > 0 && (\n                <div className=\"px-4 py-2 bg-red-100 border-2 border-red-400 rounded-full text-sm font-bold text-red-700 animate-pulse shadow-lg\">\n                  ‚ö†Ô∏è {criticalAlerts.length} CRITICAL\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Video Upload Section */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl border-2 border-purple-100 p-8 shadow-xl\">\n              <h2 className=\"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3\">\n                <span className=\"text-3xl\">üìπ</span> Video Feed Analysis\n              </h2>\n              \n              <div className=\"border-2 border-dashed border-purple-300 rounded-xl p-12 text-center hover:border-purple-500 transition-all bg-purple-50/50 mb-6\">\n                <input\n                  type=\"file\"\n                  ref={fileInputRef}\n                  onChange={handleFileChange}\n                  accept=\"video/*\"\n                  className=\"hidden\"\n                />\n                \n                {!file ? (\n                  <div>\n                    <div className=\"text-7xl mb-6\">üé•</div>\n                    <p className=\"text-gray-600 mb-6 text-lg\">Upload construction site video for safety analysis</p>\n                    <button\n                      onClick={() => fileInputRef.current?.click()}\n                      className=\"px-8 py-4 bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white rounded-xl font-semibold text-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105\"\n                    >\n                      Select Video File\n                    </button>\n                  </div>\n                ) : (\n                  <div>\n                    <div className=\"text-5xl mb-4\">‚úì</div>\n                    <p className=\"text-gray-800 mb-2 font-semibold text-lg\">{file.name}</p>\n                    <p className=\"text-sm text-gray-500 mb-6\">\n                      {(file.size / (1024 * 1024)).toFixed(2)} MB\n                    </p>\n                    {videoRef && file && (\n                      <video\n                        ref={videoRef}\n                        src={URL.createObjectURL(file)}\n                        controls\n                        className=\"w-full max-w-2xl mx-auto rounded-xl shadow-lg mb-6\"\n                      />\n                    )}\n                    <div className=\"flex gap-4 justify-center\">\n                      <button\n                        onClick={() => {\n                          setFile(null);\n                          setCurrentAnalysis(null);\n                          setAnnotatedImage(null);\n                          if (fileInputRef.current) fileInputRef.current.value = '';\n                        }}\n                        className=\"px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-xl font-medium transition-all\"\n                      >\n                        Change File\n                      </button>\n                      <button\n                        onClick={handleAnalyze}\n                        disabled={analyzing}\n                        className=\"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all transform hover:scale-105 disabled:transform-none\"\n                      >\n                        {analyzing ? '‚è≥ ANALYZING...' : 'üîç ANALYZE SAFETY'}\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {error && (\n                <div className=\"mt-6 p-4 bg-red-50 border-2 border-red-200 rounded-xl text-red-700\">\n                  {error}\n                </div>\n              )}\n            </div>\n\n            {/* Annotated Image Display */}\n            {annotatedImage && (\n              <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl border-2 border-purple-100 p-6 shadow-xl\">\n                <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Annotated Analysis</h3>\n                <div className=\"relative\">\n                  <img\n                    src={annotatedImage}\n                    alt=\"Safety analysis with face annotations\"\n                    className=\"w-full rounded-xl shadow-lg\"\n                  />\n                  <canvas ref={canvasRef} className=\"hidden\" />\n                </div>\n              </div>\n            )}\n\n            {/* Current Analysis Results */}\n            {currentAnalysis && (\n              <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl border-2 border-purple-100 p-8 shadow-xl\">\n                <div className=\"flex items-center justify-between mb-8\">\n                  <h2 className=\"text-2xl font-bold text-gray-800\">Safety Analysis</h2>\n                  <div className={`px-6 py-3 rounded-xl border-2 font-bold text-lg ${getStatusColor(currentAnalysis.status)}`}>\n                    {currentAnalysis.status}\n                  </div>\n                </div>\n\n                {/* Analysis Bullet Points */}\n                <div className=\"mb-8\">\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Analysis:</h3>\n                  <ul className=\"space-y-3 bg-purple-50 rounded-xl p-6 border border-purple-100\">\n                    {currentAnalysis.analysis.map((point, idx) => (\n                      <li key={idx} className=\"flex items-start gap-3 text-gray-700\">\n                        <span className=\"text-purple-600 font-bold mt-1\">‚Ä¢</span>\n                        <span className=\"flex-1\">{point}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n\n                {/* Detected Workers */}\n                {currentAnalysis.detected && currentAnalysis.detected.length > 0 && (\n                  <div className=\"mb-8\">\n                    <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Detected Workers:</h3>\n                    <div className=\"space-y-4\">\n                      {currentAnalysis.detected.map((worker, idx) => (\n                        <div key={idx} className=\"bg-white border-2 border-purple-100 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow\">\n                          <div className=\"flex items-start justify-between mb-4\">\n                            <p className=\"font-semibold text-gray-800 text-lg\">{worker.description}</p>\n                            <span className={`px-3 py-1 rounded-lg text-sm font-semibold ${getZoneColor(worker.zone)}`}>\n                              {worker.zone}\n                            </span>\n                          </div>\n                          <div className=\"grid grid-cols-3 gap-4\">\n                            <div className={worker.ppe.hardHat ? 'text-green-600 font-medium' : 'text-red-600 font-semibold'}>\n                              {worker.ppe.hardHat ? '‚úì' : '‚úó'} Hard Hat\n                            </div>\n                            <div className={worker.ppe.safetyVest ? 'text-green-600 font-medium' : 'text-red-600 font-semibold'}>\n                              {worker.ppe.safetyVest ? '‚úì' : '‚úó'} Safety Vest\n                            </div>\n                            <div className={worker.ppe.protectiveBoots ? 'text-green-600 font-medium' : 'text-red-600 font-semibold'}>\n                              {worker.ppe.protectiveBoots ? '‚úì' : '‚úó'} Boots\n                            </div>\n                            <div className={worker.ppe.safetyGlasses ? 'text-green-600 font-medium' : 'text-red-600 font-semibold'}>\n                              {worker.ppe.safetyGlasses ? '‚úì' : '‚úó'} Glasses\n                            </div>\n                            <div className={worker.ppe.harness ? 'text-green-600 font-medium' : 'text-red-600 font-semibold'}>\n                              {worker.ppe.harness ? '‚úì' : '‚úó'} Harness\n                            </div>\n                            <div className={worker.compliance ? 'text-green-600 font-semibold' : 'text-red-600 font-semibold'}>\n                              {worker.compliance ? '‚úì Compliant' : '‚úó Violation'}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Action */}\n                <div className=\"mb-8\">\n                  <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Action:</h3>\n                  <div className=\"bg-red-50 border-2 border-red-200 p-6 rounded-xl\">\n                    <p className=\"font-mono text-red-700 font-semibold text-lg\">{currentAnalysis.action}</p>\n                  </div>\n                </div>\n\n                {/* Voice Output */}\n                {currentAnalysis.voiceOutput && (\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Audio Intervention:</h3>\n                    <div className=\"bg-yellow-50 border-2 border-yellow-200 p-6 rounded-xl\">\n                      <p className=\"font-mono text-yellow-800 font-semibold text-lg mb-4\">\n                        \"{currentAnalysis.voiceOutput}\"\n                      </p>\n                      {audioEnabled && (\n                        <button\n                          onClick={() => speakIntervention(currentAnalysis.voiceOutput!, currentAnalysis.audioLevel)}\n                          className=\"px-6 py-3 bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl font-semibold transition-all shadow-md hover:shadow-lg\"\n                        >\n                          üîä Replay Audio\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Sidebar - Alerts & Stats */}\n          <div className=\"lg:col-span-1 space-y-6\">\n            <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl border-2 border-purple-100 p-6 shadow-xl\">\n              <h2 className=\"text-xl font-bold text-gray-800 mb-6\">System Status</h2>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between p-4 bg-green-50 rounded-xl border border-green-200\">\n                  <span className=\"text-gray-700 font-medium\">Video Feed</span>\n                  <span className=\"text-green-600 font-bold\">‚úì ONLINE</span>\n                </div>\n                <div className=\"flex items-center justify-between p-4 bg-green-50 rounded-xl border border-green-200\">\n                  <span className=\"text-gray-700 font-medium\">Audio System</span>\n                  <span className={audioEnabled ? 'text-green-600 font-bold' : 'text-gray-400'}>\n                    {audioEnabled ? '‚úì ENABLED' : '‚úó DISABLED'}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between p-4 bg-green-50 rounded-xl border border-green-200\">\n                  <span className=\"text-gray-700 font-medium\">AI Analysis</span>\n                  <span className=\"text-green-600 font-bold\">‚úì ACTIVE</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Critical Alerts */}\n            {criticalAlerts.length > 0 && (\n              <div className=\"bg-red-50 border-2 border-red-300 rounded-2xl p-6 shadow-xl\">\n                <h2 className=\"text-xl font-bold text-red-700 mb-4\">üî¥ Critical Alerts</h2>\n                <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                  {criticalAlerts.slice(0, 5).map((alert) => (\n                    <div key={alert.id} className=\"bg-white p-4 rounded-xl border-2 border-red-200 shadow-sm\">\n                      <p className=\"text-sm text-red-700 font-bold mb-2\">{alert.status}</p>\n                      <p className=\"text-xs text-gray-600 line-clamp-2\">{alert.analysis}</p>\n                      <p className=\"text-xs text-gray-400 mt-2\">\n                        {new Date(alert.timestamp).toLocaleTimeString()}\n                      </p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n    </main>\n    </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}